# AMR-IF-UI: GUI
<!-- TOC -->

- [1. UI要素と機能](#1-ui要素と機能)
    - [1.1. Sidenav (サイドナビ)](#11-sidenav-サイドナビ)
    - [1.2. Viewer (ビューア)](#12-viewer-ビューア)
    - [1.3. Controller (コントローラ)](#13-controller-コントローラ)
- [2. キーコントロール](#2-キーコントロール)
- [3. コマンド](#3-コマンド)
    - [3.1. コマンド種類](#31-コマンド種類)
        - [3.1.1. 単一コマンド](#311-単一コマンド)
        - [3.1.2. 複合コマンド](#312-複合コマンド)

<!-- /TOC -->
## 1. UI要素と機能

### 1.1. Sidenav (サイドナビ)

Sidenav (サイドナビ) は AMR-IF-UIの左側に表示されている5つのアイコンから構成されるペインです。

<!--https://fonts.google.com/?selected=Material+Icons-->

| 名称 | 説明 |
|:---|:---|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg> ホーム | ホームのビュー (Sidenav, Viewer および Controllerから構成される表示画面) に戻る。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.65 1.34 3 3 3s3-1.35 3-3h5.5c0 1.65 1.34 3 3 3s3-1.35 3-3H23v-5l-6-6zM3 11V7h4v4H3zm3 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7-6.5H9V7h4v4zm4.5 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM15 11V7h1l4 4h-5z"/></svg> ロボット設定 | ロボットごとにロボット名、色、ネームスペース、IPアドレスおよびポート番号を設定する。|
|<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> ポーズ設定 | それぞれの姿勢について、名前、色、位置および方向を設定する。<br> このポーズ設定は Viewer での表示にのみ使用される。|
|<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg> コマンドリスト設定 | それぞれのコマンドについて、コマンドリストのID、コマンド、パラメータ、OK_nextid, NG_nextidを設定する。<br>コマンドは必須です。 <br>Id, OK_nextid および NG_nextid はオプションです。<br>コマンドによってはパラメータが必要です。|
|<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><path d="M0,0h24v24H0V0z" fill="none"/><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></g></svg> Viewer 設定 | 解像度、フォントサイズ、ポーズマーカーサイズ、回転の設定。<br>解像度、フォントサイズおよびポーズマーカーサイズを変更するとビューアの見た目が変わります。<br> 回転は0から3の4つを選択でき、それぞれ90度ごとの回転と対応します。|

画面右上の「エクスポート」を押して、各設定をファイルに保存することができます。
「インポート」を押して、ファイルから設定をロードすることができます。また、「クリア」を押して設定を削除することができます。


### 1.2. Viewer (ビューア)

ビューアはAMR-IF-UIの中央にあり、地図、ポーズ、ロボットの現在位置、計画経路を表示します。

### 1.3. Controller (コントローラ)

コントローラーはAMR-IF-UIの右側にあり、ロボット名、アイコン、ボタンは、選択したロボットの設定色の背景色で表示されます。
ロボットの設定がない場合、コントローラーは表示されません。
コントローラのボタンを使用して、選択したロボットにコマンドを送信できます。


| 名称 | 説明 |
|:---|:---|
| ロボット名 | 選択されたロボット名称が表示される。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.65 1.34 3 3 3s3-1.35 3-3h5.5c0 1.65 1.34 3 3 3s3-1.35 3-3H23v-5l-6-6zM3 11V7h4v4H3zm3 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7-6.5H9V7h4v4zm4.5 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM15 11V7h1l4 4h-5z"/></svg> ロボット | 操作するロボットを変更する。ダイアログからロボットを選択します。 |
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"/></svg>接続状況 | 接続状況を表示。 <br>接続状況によりアイコンが変化する。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/></svg>コマンドリスト実行 | コマンドリストを実行する。ダイアログから、コマンドリストと開始インデックスを選択します。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg> コマンド実行 | コマンドを実行。ダイアログからコマンドおよび必要に応じてオプションを選択する。|
| <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/></g><g><g><g><path d="M2.5,19h19v2h-19V19z M22.07,9.64c-0.21-0.8-1.04-1.28-1.84-1.06L14.92,10l-6.9-6.43L6.09,4.08l4.14,7.17l-4.97,1.33 l-1.97-1.54l-1.45,0.39l2.59,4.49c0,0,7.12-1.9,16.57-4.43C21.81,11.26,22.28,10.44,22.07,9.64z"/></g></g></g></svg>run_nav コマンド | "run_nav" コマンドを実行する。ダイアログからマップファイルを選択する。|
| <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/></g><g><g><g><path d="M2.5,19h19v2h-19V19z M19.34,15.85c0.8,0.21,1.62-0.26,1.84-1.06c0.21-0.8-0.26-1.62-1.06-1.84l-5.31-1.42l-2.76-9.02 L10.12,2v8.28L5.15,8.95L4.22,6.63L2.77,6.24v5.17L19.34,15.85z"/></g></g></g></svg> kill_nav コマンド | "kill_nav" コマンドを実行する。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> set_pose コマンド | "set_pose" コマンドを実行する。ダイアログからマップファイル名とロボットの現在の姿勢名から姿勢を選択する。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>goto コマンド | "goto" コマンドを実行する。ダイアログからマップファイル名とゴール姿勢名を選択する。|
| <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 6h12v12H6z"/></svg> キャンセルコマンド | "cancel" コマンドを実行する。 |
| コマンドリスト "0" | id0 コマンドリストを初めから実行する。|
| コマンドリスト "1" | id1 コマンドリストを初めから実行する。|
| コマンドリスト "2" | id2 コマンドリストを初めから実行する。|


## 2. キーコントロール

| キー | 機能 |
|:---|:---|
| → 右矢印キー | 右へ移動 |
| ← 左矢印キー | 左へ移動 |
| ↑ 上矢印キー | 上へ移動 |
| ↓ 下矢印キー | 下へ移動 |
| Page Up    | 拡大 |
| Page Down  | 縮小 |
| Home | デフォルト位置 |
| End | デフォルト位置 |

Shiftキーを押しながら微調整が可能です。


## 3. コマンド

AMR-IF-UIはいくつかのコマンドをサポートしています。
これらのコマンドは "src/assets/configs/config.json" で定義されています。


### 3.1. コマンド種類

AMR-IF-UIは、5つの単一コマンドと1つの複合コマンドをサポートします。
単一のコマンドは、"run_nav"、"kill_nav"、"set_pose"、"goto"、および "cancel" です。 複合コマンドは "cmdlist" です。


#### 3.1.1. 単一コマンド

| コマンド | パラメータ | 説明 |
|:---|:---|:---|
| run_nav | mapfile_name | ロボットが自律移動機能を開始します。自律移動を開始する前に一度だけ実行します。|
| kill_nav | - | ロボットは自律移動機能を終了します。 自律移動を再開するには run_nav を実行します。 |
| set_pose | mapfile_name, <br>pose_name | 自律移動開始時にロボットに現在位置を通知します。|
| goto | mapfile_name, <br>goal_name | ロボットに特定のゴールへ移動するように指示します。|
| cancel | - | 移動を停止します。|

#### 3.1.2. 複合コマンド

| コマンド | パラメータ | 説明 |
|:---|:---|:---|
| cmdlist | start_index | 一連のコマンド。 コマンドは順番に実行されます。 コマンドが完了したら、次のコマンドを実行します。 OK_nextidを指定した場合は、OK_nextidのコマンドを実行します。 コマンドでエラーが発生した場合、CmdListは終了します。 ただし、NG_nextidが指定されている場合は、NG_nextidのコマンドを実行します。 |
